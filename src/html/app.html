<main id="main-editor">
	<window-bar :note="selectedNote" :rack-folder="selectedRackOrFolder"></window-bar>
	<title-menu
		:toggle-full-screen="toggleFullScreen"
		:open-sync="openSync"
		:move-sync="moveSync"
		:open-credits="openCredits"
		:is-full-screen="isFullScreen"
		:selected-theme="selectedTheme"
		:change-theme="changeTheme">
	</title-menu>
	<div class="my-main" :class="{'note_selected': isNoteSelected }">
		<div :class="{'outer_wrapper': true}">
			<div class="sidebar">
				<!-- :style="{ width: racksWidth+'px' }" -->
				<div class="cell-container">
					<div class="my-shelf" @contextmenu="shelfMenu()">
						<div class="my-shelf-wrapper">
							<racks
								:racks="racks"
								:folders="folders"
								:selected-rack-or-folder="selectedRackOrFolder"
								:dragging-note="draggingNote"
								:selected-note="selectedNote"
								:change-rack-or-folder="changeRackOrFolder"
								:open-rack="openRack"
								:close-rack="closerack"
								:folder-drag-ended="folderDragEnded"
								:set-dragging-note="setDraggingNote"
								:delete-folder="deleteFolder"
								:add-folder-to-rack="addFolderToRack"
								:add-rack-separator="addRackSeparator">
							</racks>
						</div>
					</div>
				</div>
				<handler-stack :sidebar-drag="sidebarDrag" :sidebar-drag-end="sidebarDragEnd"></handler-stack>
				<!-- :style="{ width: notesWidth+'px' }" -->
				<div class="cell-container">
					<add-note v-if="selectedFolder"></add-note>
					<div class="my-shelf-notes" ref="refNotes">
						<notes :notes="filteredNotes"
							:toggle-full-screen="toggleFullScreen"
							:original-notes="notes"
							:selected-note="selectedNote"
							:selected-folder="selectedFolder"
							:dragging-note="draggingNote"
							:change-note="changeNote"
							:set-dragging-note="setDraggingNote">
						</notes>
					</div>
				</div>
				<handler-notes :sidebar-drag="sidebarDrag" :sidebar-drag-end="sidebarDragEnd"></handler-notes>
			</div>
			<div class="cell-container main-cell-container" :class="[ 'font'+fontsize ]">
				<note-menu :note="selectedNote"
					:is-full-screen="isFullScreen"
					:is-preview="isPreview"
					:fontsize="fontsize"
					:toggle-preview="togglePreview">
				</note-menu>
				<div class="my-editor" ref="myEditor">
					<div>
						<codemirror v-show="!isPreview && isNoteSelected"
							:note="selectedNote"
							:is-full-screen="isFullScreen"
							:is-preview="isPreview"
							:toggle-preview="togglePreview">
						</codemirror>
						<div v-show="isPreview && isNoteSelected" class="my-editor-preview" @contextmenu.prevent.stop="previewMenu()">
							<div v-html="preview">
							</div>
						</div>
					</div>
				</div>
				<!--vue-scrollbar classes="my-scrollbar" ref="MainScrollbar">
					<div class="scroll-me">
						
					</div>
				</vue-scrollbar-->
				<flashmessage :messages="messages"></flashmessage>
			</div>
		</div>
	</div>
	<modal ref="dialog"></modal>
</main>