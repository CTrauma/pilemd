<div id="title-bar">
	
	<title-menu></title-menu>

	<!--div id="title-bar-btns">
		<button id="min-btn" @click="menu_min()">
			<i class="material-icons">remove</i>
		</button>
		<button id="max-btn" @click="menu_max()">
			<i class="material-icons">web_asset</i>
		</button>
		<button id="close-btn" @click="menu_close()">
			<i class="material-icons">clear</i>
		</button>
	</div-->
</div>
<div class="my-main">
	<div class="outer_wrapper">

		<!--div class="my-sidebar-header">
			<button title="Click to add note" class="my-add-note" @click="addNote()"><i class="material-icons">edit</i></button>
		</div-->
		<!--button @click="toggleFullScreen"
			class="my-sidebar-toggle"
			:class="{'isFullScreen': isFullScreen}"
			title="Toggle Widescreen">
			<i class="material-icons">keyboard_arrow_left</i>
		</button>
		@dragover.stop="allDragOver($event)"
		@dragleave.prevent.stop="allDragLeave($event)"
		@drop.prevent.stop="dropToAll($event)"
		-->

		<div class="cell-container" v-show="!isFullScreen" :style="{ width: racksWidth+'px' }">
			<div class="my-shelf" @contextmenu="shelfMenu()">
				<div class="my-shelf-wrapper">
					<div :class="{'isShelfSelected': ((isSearchAll() && !draggingNote) || allDragHover), 'noteIsHere': selectedNote.folderUid === null}"
						@click.prevent.stop="selectAll()"
						@dragover.stop="allDragOver($event)"
						@dragleave.prevent.stop="allDragLeave($event)"
						@drop.prevent.stop="dropToAll($event)"
						class="my-shelf-all">
						<a>All</a>
					</div>
					<racks :racks.sync="racks"
						:folders.sync="folders"
						:notes="notes"
						:selected-rack-or-folder.sync="selectedRackOrFolder"
						:dragging-note.sync="draggingNote"
						:editing-rack.sync="editingRack"
						:selected-note="selectedNote">
					</racks>
				</div>
			</div>
		</div>

		<handler-stack v-show="!isFullScreen"></handler-stack>

		<div class="cell-container" v-show="!isFullScreen" :style="{ width: notesWidth+'px' }">
			<notes :notes="filteredNotes"
			:toggle-full-screen="toggleFullScreen"
			:original-notes.sync="notes"
			:selected-note.sync="selectedNote"
			:dragging-note.sync="draggingNote">
			</notes>
		</div>

		<handler-notes v-show="!isFullScreen"></handler-notes>

		<div class="cell-container" style="position: relative;">

			<codemirror-menu></codemirror-menu>
			
			<div class="my-editor">
				<codemirror v-show="!isPreview && selectedNote.title"
					:note="selectedNote"
					:is-full-screen="isFullScreen"
					:is-preview="isPreview">
				</codemirror>
				<div v-show="isPreview && selectedNote.title" v-html="preview" class="my-editor-preview" @contextmenu.prevent.stop="previewMenu()"></div>
				<flashmessage :messages="messages"></flashmessage>
			</div>
		</div>
	</div>
</div>

<modal :show.sync="modalShow"
	:title="modalTitle"
	:description="modalDescription"
	:prompts.sync="modalPrompts"
	:okcb="modalOkcb">
</modal>