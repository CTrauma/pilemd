<div id="title-bar">
	
	<title-menu></title-menu>

	<!--div id="title-bar-btns">
		<button id="min-btn" @click="menu_min()">
			<i class="material-icons">remove</i>
		</button>
		<button id="max-btn" @click="menu_max()">
			<i class="material-icons">web_asset</i>
		</button>
		<button id="close-btn" @click="menu_close()">
			<i class="material-icons">clear</i>
		</button>
	</div-->
</div>
<div class="my-main">
	<div :class="{'outer_wrapper': true, 'full_width_container': isFullScreen}">

		<!--div class="my-sidebar-header">
			<button title="Click to add note" class="my-add-note" @click="addNote()"><i class="material-icons">edit</i></button>
		</div-->
		<!--button @click="toggleFullScreen"
			class="my-sidebar-toggle"
			:class="{'isFullScreen': isFullScreen}"
			title="Toggle Widescreen">
			<i class="material-icons">keyboard_arrow_left</i>
		</button>
		@dragover.stop="allDragOver($event)"
		@dragleave.prevent.stop="allDragLeave($event)"
		@drop.prevent.stop="dropToAll($event)"
		-->

		<div class="sidebar">
			<div class="cell-container" :style="{ width: racksWidth+'px' }">
				<div class="my-shelf" @contextmenu="shelfMenu()">
					<div class="my-shelf-wrapper">
						<div :class="{'isShelfSelected': ((isSearchAll() && !draggingNote) || allDragHover), 'noteIsHere': selectedNote.folderUid === null}"
							@click.prevent.stop="selectAll()"
							@dragover.stop="allDragOver($event)"
							@dragleave.prevent.stop="allDragLeave($event)"
							@drop.prevent.stop="dropToAll($event)"
							class="my-shelf-all">
							<a>All</a>
						</div>
						<racks
							:racks.sync="racks"
							:folders.sync="folders"
							:notes="filteredNotes"
							:selected-rack-or-folder.sync="selectedRackOrFolder"
							:dragging-note.sync="draggingNote"
							:editing-rack.sync="editingRack"
							:selected-note.sync="selectedNote">
						</racks>
					</div>
				</div>
			</div>

			<handler-stack></handler-stack>
		</div>

		<div class="cell-container main-cell-container">

			<codemirror-menu></codemirror-menu>
			
			<div class="my-editor">
				<div :class="[ 'font'+fontsize ]">
					<codemirror v-show="!isPreview && selectedNote.title"
						:note="selectedNote"
						:is-full-screen="isFullScreen"
						:is-preview="isPreview">
					</codemirror>
					<div v-show="isPreview && selectedNote.title" class="my-editor-preview" @contextmenu.prevent.stop="previewMenu()">
						<div v-html="preview">
						</div>
					</div>
				</div>
				<flashmessage :messages="messages"></flashmessage>
			</div>
		</div>

		<div class="sidebar-right" v-show="selectedNote.title">
			<div class="cell-container" :style="{ width: propertiesWidth+'px' }">
				<div v-if="selectedNote.properties">
					<strong>Font Size: </strong><br/>
					<select v-model="fontsize" style="width: 100%;">
						<option>10</option>
						<option>12</option>
						<option>14</option>
						<option>15</option>
						<option>16</option>
						<option>18</option>
						<option>20</option>
						<option>24</option>
					</select>
					<hr>
					<table>
						<tr>
							<td><strong>Line Count: </strong></td>
							<td class="right"><span>{{ selectedNote.properties.lineCount }}</span></td>
						</tr>
						<tr>
							<td><strong>Word Count: </strong></td>
							<td class="right"><span>{{ selectedNote.properties.wordCount }}</span></td>
						</tr>
						<tr>
							<td><strong>Char Count: </strong></td>
							<td class="right"><span>{{ selectedNote.properties.charCount }}</span></td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>

<modal :show.sync="modalShow"
	:title="modalTitle"
	:description="modalDescription"
	:prompts.sync="modalPrompts"
	:okcb="modalOkcb">
</modal>