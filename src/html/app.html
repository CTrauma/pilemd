<main id="main-editor">
	<window-bar></window-bar>
	<title-menu></title-menu>
	<div class="my-main" :class="{'note_selected': selectedNote.title }">
		<div :class="{'outer_wrapper': true}">

			<div class="sidebar">
				<!-- :style="{ width: racksWidth+'px' }" -->
				<div class="cell-container">
					<div class="my-shelf" @contextmenu="shelfMenu()">
						<div class="my-shelf-wrapper">
							<!--div :class="{'isShelfSelected': ((isSearchAll() && !draggingNote) || allDragHover), 'noteIsHere': selectedNote.folderUid === null}"
								@click.prevent.stop="selectAll()"
								@dragover.stop="allDragOver($event)"
								@dragleave.prevent.stop="allDragLeave($event)"
								@drop.prevent.stop="dropToAll($event)"
								class="my-shelf-all">
								<a>All</a>
							</div-->
							<vue-scrollbar classes="my-scrollbar" ref="RacksScrollbar">
								<div class="scroll-me">
									<racks
										:racks="racks"
										:folders="folders"
										:notes="notes"
										:filtered-notes="filteredNotes"
										:selected-rack-or-folder="selectedRackOrFolder"
										:dragging-note="draggingNote"
										:editing-rack="editingRack"
										:selected-note="selectedNote"
										:toggle-full-screen="toggleFullScreen"
										v-on:select="changeRackOrFolder"
										v-on:openrack="openrack"
										v-on:closerack="closerack"
										v-on:folderdragend="folderDrag">
									</racks>
								</div>
							</vue-scrollbar>
						</div>
					</div>
				</div>
				<handler-stack v-on:hdrag="editordrag" v-on:hdragend="editordragend"></handler-stack>
				<!-- :style="{ width: notesWidth+'px' }" -->
				<div class="cell-container">
					<vue-scrollbar classes="my-scrollbar" ref="NotesScrollbar">
						<div class="scroll-me">
							<notes :notes="filteredNotes"
							:toggle-full-screen="toggleFullScreen"
							:original-notes="notes"
							:selected-note="selectedNote"
							:dragging-note="draggingNote"
							v-on:select="changeNote">
							</notes>
						</div>
					</vue-scrollbar>
				</div>
				<handler-notes v-on:hdrag="editordrag" v-on:hdragend="editordragend"></handler-notes>
			</div>
			<div class="cell-container main-cell-container" :class="[ 'font'+fontsize ]">
				<note-menu :note="selectedNote"
					:is-full-screen="isFullScreen"
					:is-preview="isPreview">
				</note-menu>
				<vue-scrollbar classes="my-scrollbar" ref="MainScrollbar">
					<div class="scroll-me">
						<div class="my-editor">
							<codemirror v-show="!isPreview && selectedNote.title"
								:note="selectedNote"
								:is-full-screen="isFullScreen"
								:is-preview="isPreview">
							</codemirror>
							<div v-show="isPreview && selectedNote.title" class="my-editor-preview" @contextmenu.prevent.stop="previewMenu()">
								<div v-html="preview">
								</div>
							</div>
						</div>
					</div>
				</vue-scrollbar>
				<flashmessage :messages="messages"></flashmessage>
			</div>

			<div class="sidebar-right" v-show="selectedNote.title" :style="{ right: ( propertiesOpen ? '0px' : '-'+propertiesWidth+'px' ) }">
				<div class="cell-container" :style="{ width: propertiesWidth+'px' }">
					<div v-if="selectedNote.properties">
						<strong>Font Size: </strong><br/>
						<select v-model="fontsize" style="width: 100%;">
							<option>10</option>
							<option>12</option>
							<option>14</option>
							<option>15</option>
							<option>16</option>
							<option>18</option>
							<option>20</option>
							<option>24</option>
						</select>
						<hr>
						<table>
							<tr>
								<td><strong>Line Count: </strong></td>
								<td class="right"><span>{{ selectedNote.properties.lineCount }}</span></td>
							</tr>
							<tr>
								<td><strong>Word Count: </strong></td>
								<td class="right"><span>{{ selectedNote.properties.wordCount }}</span></td>
							</tr>
							<tr>
								<td><strong>Char Count: </strong></td>
								<td class="right"><span>{{ selectedNote.properties.charCount }}</span></td>
							</tr>
						</table>
						<hr>
						<table>
							<tr>
								<td><strong>Created: </strong></td>
							<tr/>
							<tr>
								<td class="right"><span>{{ selectedNote.data.created_at.format('MMM DD, YYYY') }}</span></td>
							</tr>
							<tr>
								<td><strong>Modified: </strong></td>
							</tr>
							<tr>
								<td class="right"><span>{{ selectedNote.data.updated_at.format('MMM DD, YYYY') }}</span></td>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<modal ref="dialog"></modal>
</main>